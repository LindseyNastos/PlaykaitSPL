<div class="row">
    <div class="col-sm-12">
        <div class="heading-div">
            <a href="/expenses" class="btn btn-warning">All Expenses</a>
            Add a new expense
        </div>
        <hr />
    </div>
</div>

<form name="add_expense" novalidate class="add-form">
    <div class="row">
        <div class="col-sm-12">
            <ul class="pull-right">
                <li class="error" ng-repeat="err in vm.validationErrors">{{err}}</li>
            </ul>
            <div class="form-group">
                <label>
                    Expense Name
                    <input name="expenseName" ng-trim="true" required ng-model="vm.newExpense.expenseName" type="text" placeholder="Expense Name" class="form-control" />
                </label>
                <span ng-show="add_expense.expenseName.$touched && add_expense.expenseName.$error.required" class="error">
                    Expense name is required.
                </span>
            </div>
            <div class="form-group">
                <label>
                    Expense Type
                    <select name="expenseType" required ng-model="vm.newExpense.expenseType.id" class="form-control">
                        <option ng-repeat="n in vm.expenseTypes" ng-value="n.id">{{n.name}}</option>
                    </select>
                </label>
                <span ng-show="add_expense.expenseType.$touched && add_expense.expenseType.$error.required" class="error">
                    Expense type is required.
                </span>
            </div>
            <div class="form-group">
                <label>
                    Amount
                    <input name="amount" ng-trim="true" required ng-model="vm.newExpense.amount" type="text" placeholder="Amount" class="form-control" />
                </label>
                <span ng-show="add_expense.amount.$touched && add_expense.amount.$error.required" class="error">
                    Amount is required.
                </span>
            </div>
            <div class="form-group">
                <label>Date Purchased</label>
                <br />
                <div>
                    <p id="datePopup" class="input-group">
                        <input type="text" class="form-control" uib-datepicker-popup="{{vm.format}}" ng-model="vm.dt" is-open="vm.popup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
                        <button type="button" class="btn btn-default" ng-click="vm.open()"><i class="fa fa-calendar" aria-hidden="true"></i></button>
                    </p>
                </div>
            </div>
            <div class="form-group">
                <label>
                    Notes
                    <input name="notes" ng-trim="true" ng-model="vm.newExpense.notes" type="text" placeholder="Notes" class="form-control" />
                </label>
            </div>

            <div class="form-group">
                <label>Image</label>
                <br />
                <button name="image" class="btn btn-default" ng-click="vm.pickFile()"><i class="fa fa-upload" aria-hidden="true"></i> Upload</button>

                <h2>{{vm.file.filename}}</h2>
                <img ng-src="{{vm.file.url | fpConvert:{w: 400} }}" alt="{{vm.file.filename}}" />

            </div>
            <hr />
            <input ng-click="vm.addExpense()" class="btn btn-info pull-right" type="button" value="Save New Expense" ng-disabled="!add_expense.$valid"/>
        </div>
    </div>
</form>